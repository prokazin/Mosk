<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú–æ—Å–∫–≤–∏—á 412 –ö–ª–∏–∫–µ—Ä - –°–ª–æ–∂–Ω—ã–π —Ä–µ–∂–∏–º</title>
<style>
  /* –§–æ–Ω —Å –ø–ª–∞–≤–Ω–æ–π —Å–º–µ–Ω–æ–π –¥–Ω—è –∏ –Ω–æ—á–∏ */
  @keyframes dayNight {
    0%, 100% { background: linear-gradient(to bottom, #87CEEB 0%, #f0f8ff 100%); }
    50% { background: linear-gradient(to bottom, #0d1b2a 0%, #1b263b 100%); }
  }
  body, html {
    margin: 0; padding: 0; height: 100vh; overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    animation: dayNight 60s ease-in-out infinite;
    transition: background 0.5s ease;
    color: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(to bottom, #87CEEB 0%, #f0f8ff 100%);
  }

  .container {
    width: 100%;
    max-width: 480px;
    background: rgba(255 255 255 / 0.9);
    border-radius: 16px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    padding: 24px 28px 28px;
    text-align: center;
    position: relative;
    user-select: none;
  }

  h1 {
    font-weight: 900;
    font-size: 3rem;
    letter-spacing: 0.15em;
    margin-bottom: 18px;
    color: #1b263b;
    text-shadow: 0 0 6px rgba(0,0,0,0.1);
  }

  .stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    color: #333;
  }

  #coinsDisplay {
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 1.3rem;
    color: #b12704;
    user-select: text;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –º–æ–Ω–µ—Ç */
  .progress-container {
    width: 100%;
    height: 20px;
    background: #e0e0e0;
    border-radius: 10px;
    margin-top: 8px;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
  }

  .progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #ffd700, #ffcc00);
    border-radius: 10px;
    transition: width 0.3s ease;
    animation: pulse 2s infinite;
  }

  .progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 0.8rem;
    font-weight: bold;
    color: #333;
    text-shadow: 0 0 2px white;
  }

  @keyframes pulse {
    0% { opacity: 0.8; }
    50% { opacity: 1; }
    100% { opacity: 0.8; }
  }

  .progress-bar.full {
    animation: pulse 0.5s infinite;
    background: linear-gradient(90deg, #ffd700, #ff9900);
  }

  #clickBtn {
    width: 260px;
    cursor: pointer;
    transition: transform 0.2s ease;
    filter: drop-shadow(2px 4px 4px rgba(0,0,0,0.3));
    border-radius: 12px;
  }
  #clickBtn:active {
    transform: scale(0.95);
    filter: drop-shadow(1px 2px 3px rgba(0,0,0,0.2));
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ */
  .jump {
    animation: jumpAnim 0.4s ease forwards;
  }
  @keyframes jumpAnim {
    0% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
    100% { transform: translateY(0); }
  }

  .tabs {
    display: flex;
    justify-content: center;
    margin: 24px 0 14px;
    gap: 12px;
  }

  .tab-btn {
    background: #1b263b;
    color: #f0f8ff;
    border: none;
    padding: 10px 18px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(27, 38, 59, 0.4);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    user-select: none;
  }
  .tab-btn:hover {
    background: #3a5068;
    box-shadow: 0 8px 20px rgba(58, 80, 104, 0.7);
  }
  .tab-btn.active {
    background: #ff5e5e;
    box-shadow: 0 8px 25px rgba(255,94,94,0.9);
  }

  .tab-content {
    display: none;
    max-height: 450px;
    overflow-y: auto;
    padding: 0 12px 8px;
  }
  .tab-content.active {
    display: block;
  }

  button.upgrade-btn, button.repair-btn {
    background: #f0f8ff;
    border: 2px solid #1b263b;
    border-radius: 12px;
    padding: 12px 16px;
    font-weight: 700;
    font-size: 1rem;
    margin: 8px 0;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.25s ease, border-color 0.3s ease;
  }
  button.upgrade-btn:hover:not(:disabled),
  button.repair-btn:hover:not(:disabled) {
    background-color: #d3e0f0;
    border-color: #ff5e5e;
  }
  button:disabled {
    cursor: not-allowed;
    opacity: 0.45;
  }

  #notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #ffefd5;
    border: 2px solid #ff5e5e;
    padding: 12px 22px;
    border-radius: 30px;
    font-weight: 700;
    font-size: 1.15rem;
    color: #b12704;
    box-shadow: 0 0 18px #ff5e5eaa;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
    z-index: 10000;
    user-select: none;
  }
  #notification.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –ª–∏–¥–µ—Ä–æ–≤ */
  #leaderList {
    list-style: none;
    padding: 0;
    font-weight: 600;
    color: #222;
    max-height: 320px;
    overflow-y: auto;
  }
  #leaderList li {
    margin: 8px 0;
    padding: 6px 14px;
    border-radius: 10px;
    background: #e9f0f7;
    box-shadow: inset 0 0 6px #a3bcd6;
    user-select: text;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>–ú–û–°–ö–í–ò–ß</h1>

    <div class="stats" aria-label="–ò–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
      <p><span>–ü—Ä–æ–±–µ–≥:</span> <strong id="score">0</strong> –∫–º</p>
      <p><span>–°–∫–æ—Ä–æ—Å—Ç—å:</span> <strong id="perSecond">0</strong> –∫–º/—á</p>
    </div>

    <div id="coinsDisplay" aria-live="polite" aria-atomic="true">
      üí∞ –ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span>
      <div class="progress-container">
        <div class="progress-bar" id="coinProgress"></div>
        <span class="progress-text" id="progressText">0/100</span>
      </div>
    </div>

    <img src="https://raw.githubusercontent.com/prokazin/Mosk/main/images/moskvich.png" alt="–ú–æ—Å–∫–≤–∏—á 412" id="clickBtn" tabindex="0" aria-label="–ö–ª–∏–∫–∞—Ç—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–±–µ–≥–∞" />

    <div class="tabs" role="tablist" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫">
      <button class="tab-btn active" data-tab="tuning" role="tab" aria-selected="true" tabindex="0">‚öôÔ∏è –¢—é–Ω–∏–Ω–≥</button>
      <button class="tab-btn" data-tab="repair" role="tab" aria-selected="false" tabindex="-1">üîß –†–µ–º–æ–Ω—Ç</button>
      <button class="tab-btn" data-tab="leaders" role="tab" aria-selected="false" tabindex="-1">üèÅ –õ–∏–¥–µ—Ä—ã</button>
    </div>

    <section class="tab-content active" id="tuning" role="tabpanel" tabindex="0" aria-labelledby="tuning-tab">
      <h3>‚öôÔ∏è –¢—é–Ω–∏–Ω–≥:</h3>
      <button class="upgrade-btn" id="upgrade1">–ö–∞—Ä–±—é—Ä–∞—Ç–æ—Ä (+4 –∫–º/—á) - 25 –∫–º</button>
      <button class="upgrade-btn" id="upgrade2">–¢—É—Ä–±–æ–Ω–∞–¥–¥—É–≤ (+1 –∫–º –∑–∞ –∫–ª–∏–∫) - 120 –∫–º</button>
      <button class="upgrade-btn" id="upgrade3">–°–ø–æ–π–ª–µ—Ä (+15 –∫–º/—á) - 500 –∫–º</button>
    </section>

    <section class="tab-content" id="repair" role="tabpanel" tabindex="0" aria-labelledby="repair-tab">
      <h3>üîß –†–µ–º–æ–Ω—Ç:</h3>
      <button class="repair-btn" id="fixClutch">–ü–æ—á–∏–Ω–∏—Ç—å —Å—Ü–µ–ø–ª–µ–Ω–∏–µ (250 –∫–º)</button>
      <button class="repair-btn" id="addCoolant">–ó–∞–ª–∏—Ç—å —Ç–æ—Å–æ–ª (400 –∫–º)</button>
      <button class="repair-btn" id="tuneJets">–ü–æ–¥–∫—Ä—É—Ç–∏—Ç—å –∂–∏–∫–ª—ë—Ä—ã (600 –∫–º)</button>
    </section>

    <section class="tab-content" id="leaders" role="tabpanel" tabindex="0" aria-labelledby="leaders-tab">
      <h3>üèÅ –õ—É—á—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏:</h3>
      <ul id="leaderList" aria-live="polite" aria-atomic="true">
        <li>üèÖ –õ–µ–≥–µ–Ω–¥–∞ –∫–∞–ø–æ—Ç–∞ ‚Äî 15000 –∫–º</li>
        <li>üë¥ –í–µ—Ç–µ—Ä–∞–Ω —Ç—Ä–∞–º–±–ª—ë—Ä–∞ ‚Äî 10000 –∫–º</li>
        <li>üõ† –ú–∞—Å—Ç–µ—Ä –∫–æ–ª—å—Ü–∞ ‚Äî 7500 –∫–º</li>
      </ul>
    </section>
  </div>

  <div id="notification" role="alert" aria-live="assertive"></div>

  <script>
    // –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    try {
      // –£–¥–∞–ª—è–µ–º VK Bridge –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è
      // vkBridge.send('VKWebAppInit');

      // –ë–∞–ª–∞–Ω—Å –∏–≥—Ä—ã
      const GAME_BALANCE = {
        basePerClick: 1,          // –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–±–µ–≥ –∑–∞ –∫–ª–∏–∫
        upgradeCostMultiplier: 2, // –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–∏–π
        coinsInterval: 150        // –ö–ª–∏–∫–æ–≤ –∑–∞ –º–æ–Ω–µ—Ç—É
      };

      // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
      let score = parseInt(localStorage.getItem('score')) || 0;
      let perClick = parseInt(localStorage.getItem('perClick')) || GAME_BALANCE.basePerClick;
      let perSecond = parseInt(localStorage.getItem('perSecond')) || 0;
      let coins = parseInt(localStorage.getItem('coins')) || 0;
      let clicksCount = parseInt(localStorage.getItem('clicksCount')) || 0;

      // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      const scoreElement = document.getElementById('score');
      const perSecondElement = document.getElementById('perSecond');
      const clickBtn = document.getElementById('clickBtn');
      const coinProgress = document.getElementById('coinProgress');
      const progressText = document.getElementById('progressText');
      const upgrade1Btn = document.getElementById('upgrade1');
      const upgrade2Btn = document.getElementById('upgrade2');
      const upgrade3Btn = document.getElementById('upgrade3');
      const fixClutchBtn = document.getElementById('fixClutch');
      const addCoolantBtn = document.getElementById('addCoolant');
      const tuneJetsBtn = document.getElementById('tuneJets');
      const coinsDisplay = document.getElementById('coins');
      const notification = document.getElementById('notification');
      let notificationTimeout;

      // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      function showNotification(text) {
        clearTimeout(notificationTimeout);
        notification.textContent = text;
        notification.classList.add('show');
        notificationTimeout = setTimeout(() => {
          notification.classList.remove('show');
        }, 3500);
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      function updateUI() {
        scoreElement.textContent = Math.floor(score);
        perSecondElement.textContent = perSecond;
        coinsDisplay.textContent = coins;
        
        // –ü—Ä–æ–≥—Ä–µ—Å—Å –º–æ–Ω–µ—Ç
        const progress = (clicksCount % GAME_BALANCE.coinsInterval) / GAME_BALANCE.coinsInterval * 100;
        const remaining = GAME_BALANCE.coinsInterval - (clicksCount % GAME_BALANCE.coinsInterval);
        coinProgress.style.width = `${progress}%`;
        progressText.textContent = `${GAME_BALANCE.coinsInterval - remaining}/${GAME_BALANCE.coinsInterval}`;
        
        // –ö–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
        upgrade1Btn.disabled = score < 25;
        upgrade2Btn.disabled = score < 120;
        upgrade3Btn.disabled = score < 500;
        
        // –ö–Ω–æ–ø–∫–∏ —Ä–µ–º–æ–Ω—Ç–∞
        fixClutchBtn.disabled = score < 250;
        addCoolantBtn.disabled = score < 400;
        tuneJetsBtn.disabled = score < 600;
      }

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
      function saveGame() {
        localStorage.setItem('score', score);
        localStorage.setItem('perClick', perClick);
        localStorage.setItem('perSecond', perSecond);
        localStorage.setItem('coins', coins);
        localStorage.setItem('clicksCount', clicksCount);
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
      function clickHandler() {
        score += perClick;
        clicksCount++;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç—ã
        if (clicksCount % GAME_BALANCE.coinsInterval === 0) {
          coins++;
          showNotification('üéâ –ü–æ–ª—É—á–µ–Ω–∞ –±–æ–Ω—É—Å–Ω–∞—è –º–æ–Ω–µ—Ç–∞!');
        }
        
        updateUI();
        saveGame();
        
        // –ê–Ω–∏–º–∞—Ü–∏—è
        clickBtn.classList.remove('jump');
        void clickBtn.offsetWidth;
        clickBtn.classList.add('jump');
      }

      // –£–ª—É—á—à–µ–Ω–∏—è
      function upgrade1() {
        if (score >= 25) {
          score -= 25;
          perSecond += 4;
          showNotification('‚öôÔ∏è –ö–∞—Ä–±—é—Ä–∞—Ç–æ—Ä —É–ª—É—á—à–µ–Ω! +4 –∫–º/—á');
          updateUI();
          saveGame();
        }
      }
      
      function upgrade2() {
        if (score >= 120) {
          score -= 120;
          perClick += 1;
          showNotification('üöÄ –¢—É—Ä–±–æ–Ω–∞–¥–¥—É–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! +1 –∫–º/–∫–ª–∏–∫');
          updateUI();
          saveGame();
        }
      }
      
      function upgrade3() {
        if (score >= 500) {
          score -= 500;
          perSecond += 15;
          showNotification('üî• –°–ø–æ–π–ª–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! +15 –∫–º/—á');
          updateUI();
          saveGame();
        }
      }

      // –†–µ–º–æ–Ω—Ç
      function fixClutch() {
        if (score >= 250) {
          score -= 250;
          showNotification('üîß –°—Ü–µ–ø–ª–µ–Ω–∏–µ –ø–æ—á–∏–Ω–µ–Ω–æ!');
          updateUI();
          saveGame();
        }
      }
      
      function addCoolant() {
        if (score >= 400) {
          score -= 400;
          showNotification('üíß –¢–æ—Å–æ–ª –∑–∞–ª–∏—Ç!');
          updateUI();
          saveGame();
        }
      }
      
      function tuneJets() {
        if (score >= 600) {
          score -= 600;
          showNotification('‚öôÔ∏è –ñ–∏–∫–ª—ë—Ä—ã –ø–æ–¥–∫—Ä—É—á–µ–Ω—ã!');
          updateUI();
          saveGame();
        }
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      clickBtn.addEventListener('click', clickHandler);
      upgrade1Btn.addEventListener('click', upgrade1);
      upgrade2Btn.addEventListener('click', upgrade2);
      upgrade3Btn.addEventListener('click', upgrade3);
      fixClutchBtn.addEventListener('click', fixClutch);
      addCoolantBtn.addEventListener('click', addCoolant);
      tuneJetsBtn.addEventListener('click', tuneJets);

      // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');
      tabButtons.forEach((btn, idx) => {
        btn.addEventListener('click', () => {
          tabButtons.forEach(b => b.classList.remove('active'));
          tabContents.forEach(tc => tc.classList.remove('active'));
          btn.classList.add('active');
          tabContents[idx].classList.add('active');
        });
      });

      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞
      setInterval(() => {
        score += perSecond;
        updateUI();
        saveGame();
      }, 1000);

      // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
      updateUI();

    } catch (e) {
      console.error("–û—à–∏–±–∫–∞ –≤ –∏–≥—Ä–µ:", e);
      alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: " + e.message);
    }
  </script>
</body>
</html>
