<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú–æ—Å–∫–≤–∏—á 412 –ö–ª–∏–∫–µ—Ä - –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω</title>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<style>
  /* –§–æ–Ω —Å –ø–ª–∞–≤–Ω–æ–π —Å–º–µ–Ω–æ–π –¥–Ω—è –∏ –Ω–æ—á–∏ */
  @keyframes dayNight {
    0%, 100% { background: linear-gradient(to bottom, #87CEEB 0%, #f0f8ff 100%); }
    50% { background: linear-gradient(to bottom, #0d1b2a 0%, #1b263b 100%); }
  }
  body, html {
    margin: 0; padding: 0; height: 100vh; overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    animation: dayNight 60s ease-in-out infinite;
    transition: background 0.5s ease;
    color: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(to bottom, #87CEEB 0%, #f0f8ff 100%);
  }

  .container {
    width: 100%;
    max-width: 480px;
    background: rgba(255 255 255 / 0.9);
    border-radius: 16px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    padding: 24px 28px 28px;
    text-align: center;
    position: relative;
    user-select: none;
  }

  h1 {
    font-weight: 900;
    font-size: 3rem;
    letter-spacing: 0.15em;
    margin-bottom: 18px;
    color: #1b263b;
    text-shadow: 0 0 6px rgba(0,0,0,0.1);
  }

  .stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    color: #333;
  }

  #coinsDisplay {
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 1.3rem;
    color: #b12704;
    user-select: text;
  }

  #clickBtn {
    width: 260px;
    cursor: pointer;
    transition: transform 0.2s ease;
    filter: drop-shadow(2px 4px 4px rgba(0,0,0,0.3));
    border-radius: 12px;
  }
  #clickBtn:active {
    transform: scale(0.95);
    filter: drop-shadow(1px 2px 3px rgba(0,0,0,0.2));
  }

  /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ */
  .jump {
    animation: jumpAnim 0.4s ease forwards;
  }
  @keyframes jumpAnim {
    0% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
    100% { transform: translateY(0); }
  }

  /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–∑–Ω–æ—Å–∞ –º–∞—à–∏–Ω—ã */
  #wearBarContainer {
    margin: 12px auto 20px;
    width: 260px;
    height: 18px;
    background: #ddd;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: inset 0 0 6px #bbb;
    user-select: none;
  }
  #wearBar {
    height: 100%;
    background: linear-gradient(90deg, #ff5e5e, #ff0000);
    width: 100%;
    transform-origin: right center;
    transition: width 0.3s ease;
  }

  .tabs {
    display: flex;
    justify-content: center;
    margin: 24px 0 14px;
    gap: 12px;
  }

  .tab-btn {
    background: #1b263b;
    color: #f0f8ff;
    border: none;
    padding: 10px 18px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(27, 38, 59, 0.4);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    user-select: none;
  }
  .tab-btn:hover {
    background: #3a5068;
    box-shadow: 0 8px 20px rgba(58, 80, 104, 0.7);
  }
  .tab-btn.active {
    background: #ff5e5e;
    box-shadow: 0 8px 25px rgba(255,94,94,0.9);
  }

  .tab-content {
    display: none;
    max-height: 450px;
    overflow-y: auto;
    padding: 0 12px 8px;
  }
  .tab-content.active {
    display: block;
  }

  button.upgrade-btn, button.repair-btn {
    background: #f0f8ff;
    border: 2px solid #1b263b;
    border-radius: 12px;
    padding: 12px 16px;
    font-weight: 700;
    font-size: 1rem;
    margin: 8px 0;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.25s ease, border-color 0.3s ease;
  }
  button.upgrade-btn:hover:not(:disabled),
  button.repair-btn:hover:not(:disabled) {
    background-color: #d3e0f0;
    border-color: #ff5e5e;
  }
  button:disabled {
    cursor: not-allowed;
    opacity: 0.45;
  }

  #notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #ffefd5;
    border: 2px solid #ff5e5e;
    padding: 12px 22px;
    border-radius: 30px;
    font-weight: 700;
    font-size: 1.15rem;
    color: #b12704;
    box-shadow: 0 0 18px #ff5e5eaa;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
    z-index: 10000;
    user-select: none;
  }
  #notification.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –ª–∏–¥–µ—Ä–æ–≤ */
  #leaderList {
    list-style: none;
    padding: 0;
    font-weight: 600;
    color: #222;
    max-height: 320px;
    overflow-y: auto;
  }
  #leaderList li {
    margin: 8px 0;
    padding: 6px 14px;
    border-radius: 10px;
    background: #e9f0f7;
    box-shadow: inset 0 0 6px #a3bcd6;
    user-select: text;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>–ú–û–°–ö–í–ò–ß</h1>

    <div class="stats" aria-label="–ò–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
      <p><span>–ü—Ä–æ–±–µ–≥:</span> <strong id="score">0</strong> –∫–º</p>
      <p><span>–°–∫–æ—Ä–æ—Å—Ç—å:</span> <strong id="perSecond">0</strong> –∫–º/—á</p>
    </div>

    <div id="coinsDisplay" aria-live="polite" aria-atomic="true">
      üí∞ –ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span>
    </div>

    <img src="https://raw.githubusercontent.com/prokazin/Mosk/main/images/moskvich.png" alt="–ú–æ—Å–∫–≤–∏—á 412" id="clickBtn" tabindex="0" aria-label="–ö–ª–∏–∫–∞—Ç—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–±–µ–≥–∞" />

    <!-- –î–æ–±–∞–≤–ª—è–µ–º —à–∫–∞–ª—É –∏–∑–Ω–æ—Å–∞ -->
    <div id="wearBarContainer" aria-label="–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–∑–Ω–æ—Å–∞ –º–∞—à–∏–Ω—ã" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">
      <div id="wearBar"></div>
    </div>

    <div class="tabs" role="tablist" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫">
      <button class="tab-btn active" data-tab="tuning" role="tab" aria-selected="true" tabindex="0">‚öôÔ∏è –¢—é–Ω–∏–Ω–≥</button>
      <button class="tab-btn" data-tab="repair" role="tab" aria-selected="false" tabindex="-1">üîß –†–µ–º–æ–Ω—Ç</button>
      <button class="tab-btn" data-tab="leaders" role="tab" aria-selected="false" tabindex="-1">üèÅ –õ–∏–¥–µ—Ä—ã</button>
    </div>

    <section class="tab-content active" id="tuning" role="tabpanel" tabindex="0" aria-labelledby="tuning-tab">
      <h3>‚öôÔ∏è –¢—é–Ω–∏–Ω–≥:</h3>
      <button class="upgrade-btn" id="upgrade1">–ö–∞—Ä–±—é—Ä–∞—Ç–æ—Ä (+8 –∫–º/—á) - 10 –∫–º</button>
      <button class="upgrade-btn" id="upgrade2">–¢—É—Ä–±–æ–Ω–∞–¥–¥—É–≤ (+3 –∫–º –∑–∞ –∫–ª–∏–∫) - 50 –∫–º</button>
      <button class="upgrade-btn" id="upgrade3">–°–ø–æ–π–ª–µ—Ä (+30 –∫–º/—á) - 200 –∫–º</button>
    </section>

    <section class="tab-content" id="repair" role="tabpanel" tabindex="0" aria-labelledby="repair-tab">
      <h3>üîß –†–µ–º–æ–Ω—Ç:</h3>
      <button class="repair-btn" id="fixClutch">–ü–æ—á–∏–Ω–∏—Ç—å —Å—Ü–µ–ø–ª–µ–Ω–∏–µ (100 –∫–º)</button>
      <button class="repair-btn" id="addCoolant">–ó–∞–ª–∏—Ç—å —Ç–æ—Å–æ–ª (150 –∫–º)</button>
      <button class="repair-btn" id="tuneJets">–ü–æ–¥–∫—Ä—É—Ç–∏—Ç—å –∂–∏–∫–ª—ë—Ä—ã (200 –∫–º)</button>
    </section>

    <section class="tab-content" id="leaders" role="tabpanel" tabindex="0" aria-labelledby="leaders-tab">
      <h3>üèÅ –õ—É—á—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏:</h3>
      <ul id="leaderList" aria-live="polite" aria-atomic="true">
        <li>üèÖ –õ–µ–≥–µ–Ω–¥–∞ –∫–∞–ø–æ—Ç–∞ ‚Äî 15000 –∫–º</li>
        <li>üë¥ –í–µ—Ç–µ—Ä–∞–Ω —Ç—Ä–∞–º–±–ª—ë—Ä–∞ ‚Äî 10000 –∫–º</li>
        <li>üõ† –ú–∞—Å—Ç–µ—Ä –∫–æ–ª—å—Ü–∞ ‚Äî 7500 –∫–º</li>
      </ul>
    </section>
  </div>

  <div id="notification" role="alert" aria-live="assertive"></div>

  <script>
    vkBridge.send('VKWebAppInit');

    let score = parseInt(localStorage.getItem('score')) || 0;
    let perClick = parseInt(localStorage.getItem('perClick')) || 2;
    let perSecond = parseFloat(localStorage.getItem('perSecond')) || 0;

    let coins = parseInt(localStorage.getItem('coins')) || 0;
    let clicksCount = parseInt(localStorage.getItem('clicksCount')) || 0;

    // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –∏–∑–Ω–æ—Å–∞: 100 = –Ω–æ–≤—ã–π, 0 = —Å–ª–æ–º–∞–Ω
    let wear = parseInt(localStorage.getItem('wear'));
    if (wear === null || isNaN(wear)) wear = 100;

    const scoreElement = document.getElementById('score');
    const perSecondElement = document.getElementById('perSecond');
    const clickBtn = document.getElementById('clickBtn');

    const upgrade1Btn = document.getElementById('upgrade1');
    const upgrade2Btn = document.getElementById('upgrade2');
    const upgrade3Btn = document.getElementById('upgrade3');

    const coinsDisplay = document.getElementById('coins');
    const notification = document.getElementById('notification');

    const wearBar = document.getElementById('wearBar');
    const wearContainer = document.getElementById('wearBarContainer');

    function updateUI() {
      scoreElement.textContent = score;
      perSecondElement.textContent = perSecond;
      coinsDisplay.textContent = coins;
      wearBar.style.width = wear + '%';
      wearContainer.setAttribute('aria-valuenow', wear);
    }

    function showNotification(message) {
      notification.textContent = message;
      notification.classList.add('show');
      setTimeout(() => notification.classList.remove('show'), 2000);
    }

    function saveProgress() {
      localStorage.setItem('score', score);
      localStorage.setItem('perClick', perClick);
      localStorage.setItem('perSecond', perSecond);
      localStorage.setItem('coins', coins);
      localStorage.setItem('wear', wear);
      localStorage.setItem('clicksCount', clicksCount);
    }

    clickBtn.addEventListener('click', () => {
      clickBtn.classList.add('jump');
      score += perClick;
      wear = Math.max(wear - 1, 0);
      clicksCount++;

      if (wear === 0) {
        wear = 100;
        coins++;
        showNotification('üöó –í—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –º–∞—à–∏–Ω—É –∏ –ø–æ–ª—É—á–∏–ª–∏ –º–æ–Ω–µ—Ç—É!');
      }

      updateUI();
      saveProgress();

      setTimeout(() => clickBtn.classList.remove('jump'), 300);
    });

    // –ê–≤—Ç–æ–∫–∏–ª–æ–º–µ—Ç—Ä–∞–∂
    setInterval(() => {
      score += perSecond;
      updateUI();
      saveProgress();
    }, 1000);

    updateUI();
  </script>
</body>
</html>
