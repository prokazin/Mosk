<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ú–æ—Å–∫–≤–∏—á 412 –ö–ª–∏–∫–µ—Ä - –•–∞—Ä–¥–∫–æ—Ä –≤–µ—Ä—Å–∏—è</title>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<style>
  /* –§–æ–Ω —Å –ø–ª–∞–≤–Ω–æ–π —Å–º–µ–Ω–æ–π –¥–µ–Ω—å/–Ω–æ—á—å */
  #background {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: url('https://raw.githubusercontent.com/prokazin/Mosk/main/images/Fon.JPG');
    background-repeat: repeat-x;
    background-size: auto 100%;
    background-position-x: 0;
    animation: bgScroll 60s linear infinite, dayNight 120s ease-in-out infinite alternate;
    z-index: -1;
    opacity: 0.9;
    filter: brightness(1);
  }
  @keyframes bgScroll {
    from { background-position-x: 0; }
    to { background-position-x: 1000px; }
  }
  @keyframes dayNight {
    0%   { filter: brightness(1); }
    50%  { filter: brightness(0.5); }
    100% { filter: brightness(1); }
  }

  body, html {
    margin: 0; padding: 0; font-family: Arial, sans-serif; background: transparent;
    height: 100vh; overflow-x: hidden;
  }
  .container {
    max-width: 480px;
    margin: 0 auto;
    padding: 20px;
    background: rgba(255 255 255 / 0.85);
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    position: relative;
    z-index: 1;
  }

  h1 {
    text-align: center;
    margin-bottom: 12px;
    font-weight: bold;
    font-size: 2.5rem;
    animation: fadeIn 2s ease forwards;
    opacity: 0;
  }
  @keyframes fadeIn {
    to { opacity: 1; }
  }

  .stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 10px;
    font-weight: 600;
  }

  .car-img {
    display: block;
    margin: 0 auto 15px auto;
    width: 250px;
    cursor: pointer;
    user-select: none;
  }

  .tabs {
    display: flex;
    justify-content: space-around;
    margin-bottom: 15px;
  }
  .tab-btn {
    padding: 8px 14px;
    font-size: 1rem;
    cursor: pointer;
    border: none;
    background: #3b5998;
    color: white;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }
  .tab-btn:hover {
    background: #2d4373;
  }
  .tab-btn.active {
    background: #2d4373;
  }

  .tab-content {
    display: none;
  }
  .tab-content.active {
    display: block;
  }

  .upgrade-btn, .repair-btn, .bonus-btn {
    display: block;
    margin: 8px 0;
    padding: 8px 10px;
    width: 100%;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 5px;
    border: 1px solid #3b5998;
    background: #e7f0ff;
    transition: background-color 0.3s ease;
  }
  .upgrade-btn:hover:not(:disabled),
  .repair-btn:hover:not(:disabled),
  .bonus-btn:hover:not(:disabled) {
    background: #c4d9ff;
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  #notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #fffae6;
    border: 1px solid #ffc107;
    padding: 10px 20px;
    border-radius: 6px;
    font-weight: 600;
    box-shadow: 0 0 10px rgba(255,193,7,0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
    z-index: 9999;
  }
  #notification.show {
    opacity: 1;
    pointer-events: auto;
  }

  /* –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ */
  #leaderList {
    list-style: none;
    padding-left: 0;
  }
  #leaderList li {
    padding: 6px 8px;
    border-bottom: 1px solid #ddd;
  }

  /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä—ã –∏–∑–Ω–æ—Å–∞ */
  .progress-container {
    width: 100%;
    background: #ddd;
    border-radius: 10px;
    overflow: hidden;
    height: 18px;
    margin-bottom: 10px;
  }
  .progress-bar {
    height: 100%;
    background-color: #3b5998;
    width: 0%;
    transition: width 0.4s ease;
  }
  .progress-bar.wear {
    background-color: #d9534f;
  }
  .progress-bar.bonus {
    background-color: #f0ad4e;
  }

  /* –ë–æ–Ω—É—Å–Ω–∞—è –≤–∞–ª—é—Ç–∞ */
  #bonusCurrencyDisplay {
    font-weight: 700;
    font-size: 1.1rem;
    text-align: center;
    margin-bottom: 15px;
    color: #f0ad4e;
  }
</style>
</head>
<body>
  <div id="background"></div>

  <div class="container">
    <h1>–ú–û–°–ö–í–ò–ß</h1>

    <div class="stats">
      <p>–ü—Ä–æ–±–µ–≥: <span id="score">0</span> –∫–º</p>
      <p>–°–∫–æ—Ä–æ—Å—Ç—å: <span id="perSecond">0</span> –∫–º/—á</p>
      <p>–ö–ª–∏–∫–∏: <span id="perClick">0</span></p>
    </div>

    <div class="progress-container" title="–ò–∑–Ω–æ—Å –º–∞—à–∏–Ω—ã">
      <div id="wearBar" class="progress-bar wear"></div>
    </div>
    <div class="progress-container" title="–ë–æ–Ω—É—Å–Ω–∞—è –≤–∞–ª—é—Ç–∞">
      <div id="bonusBar" class="progress-bar bonus"></div>
    </div>
    <div id="bonusCurrencyDisplay">–ë–æ–Ω—É—Å–Ω–∞—è –≤–∞–ª—é—Ç–∞: 0</div>

    <img src="https://raw.githubusercontent.com/prokazin/Mosk/main/images/moskvich.png" alt="–ú–æ—Å–∫–≤–∏—á 412" id="clickBtn" class="car-img">

    <div class="tabs">
      <button class="tab-btn active" data-tab="tuning">‚öôÔ∏è –¢—é–Ω–∏–Ω–≥</button>
      <button class="tab-btn" data-tab="repair">üîß –†–µ–º–æ–Ω—Ç</button>
      <button class="tab-btn" data-tab="bonus">üéÅ –ë–æ–Ω—É—Å—ã</button>
      <button class="tab-btn" data-tab="leaders">üèÅ –õ–∏–¥–µ—Ä—ã</button>
    </div>

    <div class="tab-content active" id="tuning">
      <h3>‚öôÔ∏è –¢—é–Ω–∏–Ω–≥:</h3>
      <button class="upgrade-btn" id="upgrade1">–ö–∞—Ä–±—é—Ä–∞—Ç–æ—Ä (+2 –∫–º/—á) - 25 –∫–º</button>
      <button class="upgrade-btn" id="upgrade2">–¢—É—Ä–±–æ–Ω–∞–¥–¥—É–≤ (+1 –∫–ª–∏–∫) - 120 –∫–º</button>
      <button class="upgrade-btn" id="upgrade3">–°–ø–æ–π–ª–µ—Ä (+7 –∫–º/—á) - 450 –∫–º</button>
      <button class="upgrade-btn" id="upgrade4">–õ–µ–≥–∫–∏–µ –∫–æ–ª—ë—Å–∞ (+10 –∫–º/—á) - 1200 –∫–º</button>
      <button class="upgrade-btn" id="upgrade5">–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –≤—ã—Ö–ª–æ–ø (+3 –∫–ª–∏–∫) - 2500 –∫–º</button>
    </div>

    <div class="tab-content" id="repair">
      <h3>üîß –†–µ–º–æ–Ω—Ç:</h3>
      <button class="repair-btn" id="fixClutch">–ü–æ—á–∏–Ω–∏—Ç—å —Å—Ü–µ–ø–ª–µ–Ω–∏–µ (250 –∫–º)</button>
      <button class="repair-btn" id="addCoolant">–ó–∞–ª–∏—Ç—å —Ç–æ—Å–æ–ª (300 –∫–º)</button>
      <button class="repair-btn" id="tuneJets">–ü–æ–¥–∫—Ä—É—Ç–∏—Ç—å –∂–∏–∫–ª—ë—Ä—ã (400 –∫–º)</button>
      <button class="repair-btn" id="fixEngine">–ü–æ—á–∏–Ω–∏—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—å (1000 –∫–º)</button>
      <button class="repair-btn" id="fixSuspension">–ü–æ—á–∏–Ω–∏—Ç—å –ø–æ–¥–≤–µ—Å–∫—É (1500 –∫–º)</button>
    </div>

    <div class="tab-content" id="bonus">
      <h3>üéÅ –ë–æ–Ω—É—Å—ã:</h3>
      <button class="bonus-btn" id="useBonus1" disabled>–£—Å–∫–æ—Ä–µ–Ω–∏–µ (x2 –Ω–∞ 30 —Å–µ–∫) - 3 –±–æ–Ω—É—Å–∞</button>
      <button class="bonus-btn" id="useBonus2" disabled>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 30 –∏–∑–Ω–æ—Å–∞ - 5 –±–æ–Ω—É—Å–æ–≤</button>
      <button class="bonus-btn" id="useBonus3" disabled>–°—É–ø–µ—Ä–∫–ª–∏–∫ +5 –Ω–∞ 60 —Å–µ–∫ - 4 –±–æ–Ω—É—Å–∞</button>
    </div>

    <div class="tab-content" id="leaders">
      <h3>üèÅ –õ—É—á—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏:</h3>
      <ul id="leaderList">
        <li>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞...</li>
      </ul>
    </div>
  </div>

  <div id="notification"></div>

<script>
  vkBridge.send('VKWebAppInit');

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ localStorage –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç
  let score = parseFloat(localStorage.getItem('score')) || 0;
  let perClick = parseFloat(localStorage.getItem('perClick')) || 1;
  let perSecond = parseFloat(localStorage.getItem('perSecond')) || 0;
  let wear = parseFloat(localStorage.getItem('wear')) || 0;
  let clickCount = parseInt(localStorage.getItem('clickCount')) || 0;
  let bonusCurrency = parseInt(localStorage.getItem('bonusCurrency')) || 0;

  // –í—Ä–µ–º–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
  let boostActive = false;
  let superClickActive = false;

  // –≠—Ñ—Ñ–µ–∫—Ç—ã –±–æ–Ω—É—Å–æ–≤ (—Ç–∞–π–º–µ—Ä—ã)
  let boostTimeout, superClickTimeout;

  // –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–ø–≥—Ä–µ–π–¥–æ–≤ –∏ —Ä–µ–º–æ–Ω—Ç–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å)
  const upgrades = {
    upgrade1: { cost: 25, speed: 2, clicks: 0 },
    upgrade2: { cost: 120, speed: 0, clicks: 1 },
    upgrade3: { cost: 450, speed: 7, clicks: 0 },
    upgrade4: { cost: 1200, speed: 10, clicks: 0 },
    upgrade5: { cost: 2500, speed: 0, clicks: 3 }
  };

  const repairs = {
    fixClutch: { cost: 250, wearReduction: 15 },
    addCoolant: { cost: 300, wearReduction: 20 },
    tuneJets: { cost: 400, wearReduction: 25 },
    fixEngine: { cost: 1000, wearReduction: 50 },
    fixSuspension: { cost: 1500, wearReduction: 60 }
  };

  // –≠–ª–µ–º–µ–Ω—Ç—ã UI
  const scoreDisplay = document.getElementById('score');
  const perClickDisplay = document.getElementById('perClick');
  const perSecondDisplay = document.getElementById('perSecond');
  const clickBtn = document.getElementById('clickBtn');
  const wearBar = document.getElementById('wearBar');
  const bonusBar = document.getElementById('bonusBar');
  const bonusCurrencyDisplay = document.getElementById('bonusCurrencyDisplay');
  const notification = document.getElementById('notification');

  // –¢–∞–± –∏ –∫–Ω–æ–ø–∫–∏
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab-content');

  // –ö–Ω–æ–ø–∫–∏ –∞–ø–≥—Ä–µ–π–¥–æ–≤
  const upgradeButtons = {
    upgrade1: document.getElementById('upgrade1'),
    upgrade2: document.getElementById('upgrade2'),
    upgrade3: document.getElementById('upgrade3'),
    upgrade4: document.getElementById('upgrade4'),
    upgrade5: document.getElementById('upgrade5')
  };

  // –ö–Ω–æ–ø–∫–∏ —Ä–µ–º–æ–Ω—Ç–∞
  const repairButtons = {
    fixClutch: document.getElementById('fixClutch'),
    addCoolant: document.getElementById('addCoolant'),
    tuneJets: document.getElementById('tuneJets'),
    fixEngine: document.getElementById('fixEngine'),
    fixSuspension: document.getElementById('fixSuspension')
  };

  // –ö–Ω–æ–ø–∫–∏ –±–æ–Ω—É—Å–æ–≤
  const bonusButtons = {
    useBonus1: document.getElementById('useBonus1'),
    useBonus2: document.getElementById('useBonus2'),
    useBonus3: document.getElementById('useBonus3')
  };

  // –õ–∏–¥–µ—Ä–±–æ—Ä–¥
  const leaderList = document.getElementById('leaderList');

  // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  function showNotification(text, duration = 3000) {
    notification.textContent = text;
    notification.classList.add('show');
    setTimeout(() => {
      notification.classList.remove('show');
    }, duration);
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  function updateDisplay() {
    scoreDisplay.textContent = Math.floor(score);
    perClickDisplay.textContent = perClick;
    perSecondDisplay.textContent = perSecond.toFixed(1);
    bonusCurrencyDisplay.textContent = `–ë–æ–Ω—É—Å–Ω–∞—è –≤–∞–ª—é—Ç–∞: ${bonusCurrency}`;

    // –ò–∑–Ω–æ—Å (wear) - max 100
    if (wear > 100) wear = 100;
    if (wear < 0) wear = 0;

    wearBar.style.width = `${wear}%`;

    // –ë–æ–Ω—É—Å –±–∞—Ä (–º–∞–∫—Å–∏–º—É–º 100)
    bonusBar.style.width = `${Math.min(bonusCurrency * 10, 100)}%`;

    // –ï—Å–ª–∏ –∏–∑–Ω–æ—Å > 80, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    if (wear >= 80) {
      wearBar.style.backgroundColor = '#d9534f'; // –∫—Ä–∞—Å–Ω—ã–π
    } else if (wear >= 50) {
      wearBar.style.backgroundColor = '#f0ad4e'; // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
    } else {
      wearBar.style.backgroundColor = '#5cb85c'; // –∑–µ–ª–µ–Ω—ã–π
    }

    // –í–∫–ª—é—á–∞–µ–º/–≤—ã–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∞–ø–≥—Ä–µ–π–¥–æ–≤ –∏ —Ä–µ–º–æ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∞–ª–∞–Ω—Å–∞ –∏ –∏–∑–Ω–æ—Å–∞
    Object.keys(upgradeButtons).forEach(key => {
      upgradeButtons[key].disabled = (score < upgrades[key].cost) || (wear >= 100);
    });
    Object.keys(repairButtons).forEach(key => {
      repairButtons[key].disabled = (score < repairs[key].cost) || (wear <= 0);
    });

    // –ö–Ω–æ–ø–∫–∏ –±–æ–Ω—É—Å–æ–≤: –∞–∫—Ç–∏–≤–Ω—ã –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–Ω—É—Å–Ω–∞—è –≤–∞–ª—é—Ç–∞
    bonusButtons.useBonus1.disabled = bonusCurrency < 3;
    bonusButtons.useBonus2.disabled = bonusCurrency < 5;
    bonusButtons.useBonus3.disabled = bonusCurrency < 4;
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ localStorage
  function saveGame() {
    localStorage.setItem('score', score);
    localStorage.setItem('perClick', perClick);
    localStorage.setItem('perSecond', perSecond);
    localStorage.setItem('wear', wear);
    localStorage.setItem('clickCount', clickCount);
    localStorage.setItem('bonusCurrency', bonusCurrency);
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –º–∞—à–∏–Ω–µ
  clickBtn.addEventListener('click', () => {
    let clickPower = perClick;
    if (superClickActive) clickPower += 5;
    score += clickPower;

    clickCount++;
    // –ö–∞–∂–¥—ã–µ 50 –∫–ª–∏–∫–æ–≤ –¥–∞—ë–º –±–æ–Ω—É—Å–Ω—É—é –≤–∞–ª—é—Ç—É +1
    if (clickCount % 50 === 0) {
      bonusCurrency++;
      showNotification('–ü–æ–ª—É—á–µ–Ω –±–æ–Ω—É—Å!');
    }
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–∑–Ω–æ—Å –ø—Ä–∏ –∫–ª–∏–∫–∞—Ö (0.2% –∏–∑–Ω–æ—Å–∞ –∑–∞ –∫–ª–∏–∫)
    wear += 0.2;
    updateDisplay();
    saveGame();
  });

  // –ê–ø–≥—Ä–µ–π–¥—ã
  Object.entries(upgradeButtons).forEach(([key, btn]) => {
    btn.addEventListener('click', () => {
      let upg = upgrades[key];
      if (score >= upg.cost && wear < 100) {
        score -= upg.cost;
        perSecond += upg.speed;
        perClick += upg.clicks;
        showNotification(`–ü—Ä–æ–∫–∞—á–∞–Ω–æ: ${btn.textContent.split('(')[0].trim()}`);
        updateDisplay();
        saveGame();
      }
    });
  });

  // –†–µ–º–æ–Ω—Ç
  Object.entries(repairButtons).forEach(([key, btn]) => {
    btn.addEventListener('click', () => {
      let rep = repairs[key];
      if (score >= rep.cost && wear > 0) {
        score -= rep.cost;
        wear -= rep.wearReduction;
        if (wear < 0) wear = 0;
        showNotification(`–û—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ: ${btn.textContent.split('(')[0].trim()}`);
        updateDisplay();
        saveGame();
      }
    });
  });

  // –ë–æ–Ω—É—Å—ã
  bonusButtons.useBonus1.addEventListener('click', () => {
    if (bonusCurrency >= 3 && !boostActive) {
      bonusCurrency -= 3;
      boostActive = true;
      perSecond *= 2;
      showNotification('–£—Å–∫–æ—Ä–µ–Ω–∏–µ x2 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 30 —Å–µ–∫!');
      updateDisplay();
      saveGame();
      boostTimeout = setTimeout(() => {
        perSecond /= 2;
        boostActive = false;
        showNotification('–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ.');
        updateDisplay();
        saveGame();
      }, 30000);
    }
  });

  bonusButtons.useBonus2.addEventListener('click', () => {
    if (bonusCurrency >= 5) {
      bonusCurrency -= 5;
      wear -= 30;
      if (wear < 0) wear = 0;
      showNotification('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 30% –∏–∑–Ω–æ—Å–∞!');
      updateDisplay();
      saveGame();
    }
  });

  bonusButtons.useBonus3.addEventListener('click', () => {
    if (bonusCurrency >= 4 && !superClickActive) {
      bonusCurrency -= 4;
      superClickActive = true;
      showNotification('–°—É–ø–µ—Ä–∫–ª–∏–∫ +5 –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 60 —Å–µ–∫!');
      updateDisplay();
      saveGame();
      superClickTimeout = setTimeout(() => {
        superClickActive = false;
        showNotification('–°—É–ø–µ—Ä–∫–ª–∏–∫ –∑–∞–≤–µ—Ä—à–µ–Ω.');
        updateDisplay();
        saveGame();
      }, 60000);
    }
  });

  // –ê–≤—Ç–æ-–ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–±–µ–≥–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
  setInterval(() => {
    if (wear < 100) {
      score += perSecond;
      // –ü—Ä–∏ –µ–∑–¥–µ –∏–∑–Ω–æ—Å —Ä–∞—Å—Ç–µ—Ç: 0.1% –∏–∑–Ω–æ—Å–∞ –∑–∞ –∫–∞–∂–¥—É—é 10 –∫–º –ø—Ä–æ–±–µ–≥–∞
      wear += perSecond / 100;
      updateDisplay();
      saveGame();
    } else {
      // –ï—Å–ª–∏ –∏–∑–Ω–æ—Å 100%, –ø—Ä–æ–±–µ–≥ –Ω–µ —Ä–∞—Å—Ç–µ—Ç
      showNotification('–ú–∞—à–∏–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–Ω–æ—à–µ–Ω–∞! –ü–æ—á–∏–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.', 4000);
    }
  }, 1000);

  // –¢–∞–± –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => b.classList.remove('active'));
      tabContents.forEach(c => c.classList.remove('active'));
      btn.classList.add('active');
      const tabId = btn.getAttribute('data-tab');
      document.getElementById(tabId).classList.add('active');

      if (tabId === 'leaders') {
        fetchLeaderBoard();
      }
    });
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –í–ö
  async function fetchLeaderBoard() {
    leaderList.innerHTML = '<li>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞...</li>';
    try {
      const response = await vkBridge.send('VKWebAppGetLeaderboard', {
        leaderboard_id: 'moskvich_score',
        extended: 1,
        global: 1,
        offset: 0,
        count: 10,
      });
      if (response.items && response.items.length) {
        leaderList.innerHTML = '';
        response.items.forEach((item, index) => {
          const user = item.user;
          const li = document.createElement('li');
          li.textContent = `${index + 1}. ${user.first_name} ${user.last_name}: ${item.score} –∫–º`;
          leaderList.appendChild(li);
        });
      } else {
        leaderList.innerHTML = '<li>–†–µ–π—Ç–∏–Ω–≥ –ø—É—Å—Ç.</li>';
      }
    } catch (e) {
      leaderList.innerHTML = '<li>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞.</li>';
    }
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—á–∫–æ–≤ –≤ —Ä–µ–π—Ç–∏–Ω–≥ –í–ö –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ/–∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
  window.addEventListener('beforeunload', () => {
    vkBridge.send('VKWebAppGetUserInfo').then(userInfo => {
      vkBridge.send('VKWebAppSetLeaderboardScore', {
        leaderboard_id: 'moskvich_score',
        score: Math.floor(score),
      });
    }).catch(() => {});
  });

  // –ù–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
  updateDisplay();
</script>
</body>
</html>
